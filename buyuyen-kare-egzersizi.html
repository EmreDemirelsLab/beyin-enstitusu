<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
    <title>B√ºy√ºy√ºp K√º√ß√ºlen Kare Egzersizi | ForBrain Learning Center</title>
    <style>
        :root {
            --primary-color: #0f4c8a;
            --primary-color-transparent: rgba(15, 76, 138, 0.85);
            --secondary-color: #65c8e5;
            --secondary-color-transparent: rgba(101, 200, 229, 0.85);
            --accent-color: #8cc63f;
            --accent-color-transparent: rgba(140, 198, 63, 0.85);
            --success-color: #06d6a0;
            --danger-color: #ef476f;
            --warning-color: #ffd166;
            --light-color: #f9fbff;
            --dark-color: #333333;
            --grey-color: #f0f2f5;
            --white-transparent: rgba(255, 255, 255, 0.9);
            --shadow: 0 0.25rem 0.5rem rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
            --container-padding: 5%;
            --card-padding: clamp(0.5rem, 1.8vw, 1rem);
            --section-margin: clamp(0.8rem, 2.5vw, 1.5rem);
            --heading-size: clamp(1.1rem, 3vw, 1.6rem);
            --subheading-size: clamp(0.9rem, 1.8vw, 1.1rem);
            --text-size: clamp(0.85rem, 1.6vw, 0.95rem);
            --text-small: clamp(0.75rem, 1.3vw, 0.85rem);
            --icon-size: clamp(2.2rem, 5vw, 3rem);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        
        html {
            font-size: 16px;
        }
        
        body {
            background-color: var(--light-color);
            color: var(--dark-color);
            line-height: 1.6;
            overflow-x: hidden;
            overscroll-behavior: none;
            transition: var(--transition);
        }
        
        img {
            max-width: 100%;
            height: auto;
        }
        
        .container {
            width: 100%;
            max-width: 70rem;
            margin: 0 auto;
            padding: 0 var(--container-padding);
        }
        
        /* Navbar Styles */
        .navbar {
            background-color: rgba(255, 255, 255, 0.95);
            padding: clamp(0.6rem, 1.5vw, 0.9rem) 0;
            box-shadow: var(--shadow);
            position: relative;
            z-index: 10;
            backdrop-filter: blur(4px);
        }
        
        .navbar .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            text-decoration: none;
            color: var(--primary-color);
        }
        
        .logo img {
            width: 60%;
            max-width: 15.625rem;
            min-width: 9.375rem;
            height: auto;
        }
        
        .back-button {
            color: var(--primary-color);
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 0.3125rem;
            background: var(--grey-color);
            transition: background 0.3s;
            font-size: var(--text-small);
            font-weight: 500;
        }
        
        .back-button:hover {
            background: #e5e9f0;
        }
        
        /* Header Styles */
        header {
            background-color: transparent;
            color: var(--primary-color);
            padding: clamp(0.5rem, 1.2vw, 0.8rem) 0;
            text-align: center;
            margin: var(--section-margin) 0 clamp(0.3rem, 1vw, 0.6rem);
        }
        
        header h1 {
            margin: 0;
            font-weight: 500;
            font-size: var(--heading-size);
            letter-spacing: 0.5px;
        }
        
        /* Exercise Info */
        .exercise-info {
            background-color: var(--white-transparent);
            border-radius: 0.4rem;
            padding: var(--card-padding);
            margin: 0.5rem auto var(--section-margin);
            text-align: center;
            color: #444;
            font-size: var(--text-small);
            line-height: 1.5;
            box-shadow: var(--shadow);
            max-width: 85%;
            border-left: 3px solid var(--primary-color);
            backdrop-filter: blur(4px);
            transition: transform 0.3s ease, opacity 0.3s ease;
        }
        
        .exercise-info:hover {
            transform: translateY(-2px);
            opacity: 0.95;
        }
        
        .exercise-header {
            width: 100%;
            box-sizing: border-box;
            padding: 0.5rem;
            white-space: normal;
            overflow-wrap: break-word;
            font-size: clamp(1rem, 2.5vw, 1.25rem);
        }
        
        /* Toolbar */
        .toolbar {
            background-color: white;
            padding: var(--card-padding);
            display: flex;
            flex-wrap: wrap;
            gap: 0.625rem;
            border-radius: 0.5rem;
            box-shadow: var(--shadow);
            margin-bottom: clamp(0.4rem, 1.5vw, 0.8rem);
            align-items: center;
            position: relative;
            z-index: 5;
        }
        
        .dropdown {
            position: relative;
            display: inline-block;
        }
        
        .dropdown-btn {
            background: var(--light-color);
            border: 1px solid var(--grey-color);
            border-radius: 0.375rem;
            padding: 0;
            display: flex;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 0.0625rem 0.1875rem rgba(0,0,0,0.05);
        }
        
        .dropdown-btn:hover, .dropdown-btn:active {
            background: var(--grey-color);
        }
        
        .dropdown-title {
            border-right: 1px solid var(--grey-color);
            padding: 0.5rem 0.625rem;
            font-weight: 500;
            font-size: 0.875rem;
        }
        
        .dropdown-arrow {
            padding: 0.5rem;
            color: var(--primary-color);
        }
        
        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #fff;
            min-width: 10rem;
            box-shadow: 0 0.3125rem 0.9375rem rgba(0,0,0,0.1);
            z-index: 6;
            border-radius: 0.375rem;
            margin-top: 0.3125rem;
            overflow: hidden;
        }
        
        .dropdown-content a {
            color: var(--dark-color);
            padding: 0.625rem 0.9375rem;
            text-decoration: none;
            display: block;
            transition: background 0.2s ease;
        }
        
        .dropdown-content a:hover, .dropdown-content a:active {
            background-color: var(--grey-color);
            color: var(--primary-color);
        }
        
        /* Timer Bar */
        .timer-bar {
            background: rgba(15, 76, 138, 0.8);
            color: white;
            display: flex;
            justify-content: space-between;
            border-radius: 0.4rem;
            margin-bottom: 0.05rem;
            box-shadow: var(--shadow);
            position: relative;
            z-index: 2;
            backdrop-filter: blur(4px);
            transition: background 0.3s ease;
            flex-wrap: wrap;
            height: auto;
            padding: 0.4rem 0.8rem;
        }
        
        .timer-bar:hover {
            background: rgba(15, 76, 138, 0.9);
        }
        
        .info-text {
            padding: 0 0.8rem;
            font-weight: 500;
            font-size: var(--text-small);
            letter-spacing: 0.3px;
            flex: 1 1 auto;
            min-width: 0;
            overflow-wrap: break-word;
        }
        
        .timer {
            background-color: rgba(0, 0, 0, 0.15);
            color: white;
            padding: 0 1.1rem;
            border-radius: 0 0.4rem 0.4rem 0;
            font-weight: bold;
            font-size: 0.9rem;
            transition: background-color 0.3s ease;
            flex: 0 0 auto;
            margin-top: 0.3rem;
        }
        
        /* Exercise Area */
        .exercise-area {
            position: relative;
            width: 100%;
            max-width: 100%;
            height: 38rem;
            margin: 0.5rem auto;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 0.4rem;
            overflow: hidden;
            box-shadow: var(--shadow);
            margin-top: 0.625rem;
            position: relative;
            z-index: 1;
            transition: box-shadow 0.3s ease, background-color 0.3s ease;
            border: 1px solid rgba(240, 242, 245, 0.8);
        }
        
        .exercise-area:hover {
            box-shadow: 0 0.3rem 0.8rem rgba(0, 0, 0, 0.1);
        }
        
        /* Square Container */
        .square-container {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }
        
        .square {
            position: absolute;
            width: 50px;
            height: 50px;
            background-color: var(--primary-color);
            transition: all 0.1s linear;
            z-index: 2;
        }
        
        .focus-point {
            position: absolute;
            width: 20px;
            height: 20px;
            transform: translate(-50%, -50%);
            z-index: 1;
            opacity: 0.7;
            pointer-events: none;
        }
        
        .focus-point:before, .focus-point:after {
            content: "";
            position: absolute;
            background-color: var(--primary-color-transparent);
        }
        
        .focus-point:before {
            left: 9px;
            top: 0;
            width: 2px;
            height: 20px;
        }
        
        .focus-point:after {
            left: 0;
            top: 9px;
            width: 20px;
            height: 2px;
        }
        
        /* Overlay */
        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(15, 76, 138, 0.6);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10;
            border-radius: 0.4rem;
            backdrop-filter: blur(5px);
            transition: background 0.4s ease;
        }
        
        .overlay:hover {
            background: rgba(15, 76, 138, 0.7);
        }
        
        /* Buttons */
        .start-button, .stop-button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.9375rem 2.5rem;
            font-size: 1.125rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            border-radius: 3.125rem;
            box-shadow: 0 0.25rem 0.9375rem rgba(0,0,0,0.2);
            margin: 0.3125rem;
            user-select: none;
            -webkit-user-select: none;
        }
        
        .start-button:active, .stop-button:active {
            transform: translateY(0.1875rem);
            box-shadow: 0 0.125rem 0.625rem rgba(0,0,0,0.2);
        }
        
        .stop-button {
            background: var(--danger-color);
            position: absolute;
            top: 0.9375rem;
            left: 0.9375rem;
            padding: 0.625rem 1.25rem;
            font-size: 1rem;
            z-index: 5;
            display: none;
        }
        
        /* Kontrol d√ºƒümeleri konumlandƒ±rma */
        .control-buttons-container {
            position: absolute;
            bottom: 0.9375rem;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-between;
            padding: 0 0.9375rem;
            z-index: 4;
        }
        
        .left-controls {
            display: flex;
            flex-direction: column; /* Dikey d√ºzen i√ßin column yapƒ±yoruz */
            gap: 0.5rem;
        }
        
        .right-controls {
            display: flex;
            gap: 0.5rem;
        }
        
        .center-controls {
            position: absolute;
            bottom: 0; /* Alt ortada konumlandƒ±rƒ±lƒ±yor */
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .attention-test-button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
            border-radius: 2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            box-shadow: 0 0.25rem 0.375rem rgba(0,0,0,0.1);
            transition: all 0.2s ease;
        }
        
        .attention-test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 0.375rem 0.625rem rgba(0,0,0,0.15);
        }
        
        .sound-control {
            background: var(--light-color);
            border: 1px solid var(--grey-color);
            color: var(--primary-color);
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
            border-radius: 2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            box-shadow: 0 0.25rem 0.375rem rgba(0,0,0,0.1);
            transition: all 0.2s ease;
        }
        
        .sound-control:hover {
            background: var(--grey-color);
        }
        
        .fullscreen-button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
            border-radius: 0.5rem;
            cursor: pointer;
            position: absolute;
            bottom: 0.9375rem;
            right: 0.9375rem;
            z-index: 5;
            box-shadow: 0 0.25rem 0.375rem rgba(0,0,0,0.1);
            transition: all 0.2s ease;
        }
        
        .fullscreen-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 0.375rem 0.625rem rgba(0,0,0,0.15);
        }
        
        /* Countdown */
        .countdown {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 5rem;
            height: 5rem;
            display: none;
            background: white;
            color: var(--primary-color);
            border: 3px solid var(--primary-color);
            z-index: 20;
            border-radius: 50%;
            box-shadow: 0 0.3rem 1.25rem rgba(0,0,0,0.2);
            font-weight: bold;
            pointer-events: none;
            font-size: clamp(2.5rem, 5vw, 3.5rem);
            text-align: center;
            line-height: 5rem;
        }
        
        /* Completion Message */
        .completion-message {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 0.4rem;
            padding: 1.1rem 1.6rem;
            text-align: center;
            max-width: 28rem;
            width: 90%;
            height: auto;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 0.4rem 1.2rem rgba(0,0,0,0.08);
            backdrop-filter: blur(5px);
            transform: translateY(10px);
            animation: slideUp 0.4s forwards;
            border-top: 3px solid var(--accent-color);
        }
        
        @keyframes slideUp {
            to { transform: translateY(0); }
        }
        
        .completion-title {
            color: var(--primary-color);
            font-size: 1.6rem;
            margin-top: 0.5rem;
            margin-bottom: 1rem;
            font-weight: 500;
            letter-spacing: 0.5px;
        }
        
        .result-stats {
            background-color: rgba(249, 251, 255, 0.7);
            border-radius: 0.4rem;
            padding: 0.8rem;
            margin: 0.5rem 0;
            text-align: left;
            font-size: 0.9rem;
            transition: background-color 0.3s ease;
        }
        
        .result-stats:hover {
            background-color: var(--light-color);
        }
        
        .result-stats p {
            margin: 0.4rem 0;
            display: flex;
            justify-content: space-between;
            transition: transform 0.2s ease;
        }
        
        .result-stats p:hover {
            transform: translateX(2px);
        }
        
        .result-stats p span {
            font-weight: 500;
            color: var(--primary-color);
        }
        
        .progress-bar {
            height: 1.2rem;
            background-color: rgba(240, 242, 245, 0.7);
            border-radius: 0.6rem;
            margin: 0.8rem 0;
            overflow: hidden;
            position: relative;
        }
        
        .progress-value {
            height: 100%;
            background: linear-gradient(to right, var(--primary-color-transparent), var(--primary-color));
            border-radius: 0.6rem;
            text-align: center;
            line-height: 1.2rem;
            color: white;
            font-weight: 500;
            transition: width 1.2s cubic-bezier(0.22, 1, 0.36, 1);
            font-size: 0.85rem;
            letter-spacing: 0.5px;
        }
        
        .restart-button, .submit-button {
            background: var(--accent-color-transparent);
            color: white;
            border: none;
            padding: 0.7rem 2rem;
            font-size: 0.95rem;
            font-weight: 500;
            cursor: pointer;
            margin-top: 1rem;
            transition: all 0.3s ease;
            border-radius: 2.5rem;
            box-shadow: 0 0.2rem 0.5rem rgba(0,0,0,0.1);
            user-select: none;
            -webkit-user-select: none;
            letter-spacing: 0.5px;
        }
        
        .restart-button:hover, .submit-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 0.3rem 0.7rem rgba(0,0,0,0.15);
            background: var(--accent-color);
        }
        
        .restart-button:active, .submit-button:active {
            transform: translateY(1px);
            box-shadow: 0 0.1rem 0.3rem rgba(0,0,0,0.1);
        }
        
        /* Fullscreen */
        .fullscreen {
            width: 100vw;
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 9999;
            background: white;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .fullscreen .exercise-area {
            width: 100%;
            height: 100%;
            border-radius: 0;
            box-shadow: none;
        }
        
        .fullscreen-exit {
            position: absolute;
            top: 1.25rem;
            right: 1.25rem;
            background: rgba(0,0,0,0.2);
            color: white;
            border: none;
            border-radius: 50%;
            width: 2.5rem;
            height: 2.5rem;
            font-size: 1.25rem;
            cursor: pointer;
            z-index: 10000;
            display: none;
            transition: all 0.2s ease;
        }
        
        .fullscreen-exit:hover {
            background: rgba(0,0,0,0.3);
        }
        
        /* √úst bilgi √ßubuƒüu */
        .info-bar {
            position: absolute;
            top: 0.9375rem;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-between;
            padding: 0 0.9375rem;
            z-index: 3;
            pointer-events: none;
        }
        
        .cycle-counter {
            background-color: rgba(255, 255, 255, 0.9);
            padding: 0.3rem 0.7rem;
            border-radius: 1rem;
            font-size: 0.8rem;
            color: var(--primary-color);
            font-weight: 600;
            box-shadow: var(--shadow);
            pointer-events: auto;
        }
        
        /* Focus guide stilini g√ºncelleme - artƒ±k burasƒ± center-controls i√ßinde */
        .focus-guide {
            background-color: rgba(255, 255, 255, 0.9);
            padding: 0.3rem 0.7rem;
            border-radius: 1rem;
            font-size: 0.8rem;
            color: var(--primary-color);
            font-weight: 500;
            opacity: 0.8;
            transition: opacity 0.3s ease;
            box-shadow: var(--shadow);
            pointer-events: auto;
            margin-bottom: 0.5rem; /* Alt kenarda biraz bo≈üluk bƒ±rakƒ±yoruz */
        }
        
        .focus-guide:hover {
            opacity: 1;
        }
        
        /* Attention Alert */
        .attention-alert {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(239, 71, 111, 0.9);
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            padding: 1rem 2rem;
            border-radius: 0.5rem;
            z-index: 30;
            display: none;
            animation: fadeInOut 0.5s;
            box-shadow: 0 0.3rem 1rem rgba(0,0,0,0.3);
        }
        
        @keyframes fadeInOut {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }
        
        /* Responsive */
        @media (max-width: 48em) {
            .exercise-area {
                height: 34rem;
            }
            
            .countdown {
                width: 4.5rem;
                height: 4.5rem;
                line-height: 4.5rem;
                font-size: 2.2rem;
            }
            
            .toolbar {
                flex-direction: column;
                align-items: stretch;
                padding: 0.75rem;
            }
            
            .dropdown {
                margin-bottom: 0.5rem;
            }
            
            .completion-message {
                padding: 0.8rem 1.2rem;
                width: 85%;
            }
            
            .fullscreen .timer-bar {
                position: fixed;
                top: 0.9375rem;
                left: 5%;
                right: 5%;
                width: 90%;
                z-index: 10000;
            }
            
            /* Mobil i√ßin d√ºƒüme d√ºzeni */
            .control-buttons-container {
                flex-direction: column;
                gap: 0.5rem;
                align-items: center;
                padding-bottom: 0.5rem;
            }
            
            .left-controls {
                width: 100%;
                flex-direction: column; /* Mobilde de dikey d√ºzen kalƒ±yor */
                align-items: center;
            }
            
            .center-controls {
                position: relative;
                left: auto;
                transform: none;
                margin-top: 0.5rem;
                width: 100%;
                align-items: center;
            }
            
            .right-controls {
                display: none;
            }
            
            .attention-test-button, .sound-control, .fullscreen-button {
                padding: 0.4rem 0.8rem;
                font-size: 0.8rem;
            }
            
            /* Bilgi √ßubuƒüu mobil d√ºzeni */
            .info-bar {
                flex-direction: column;
                align-items: center;
                gap: 0.5rem;
            }
        }
        
        @media (max-width: 36em) {
            .completion-message {
                padding: 0.8rem;
                width: 85%;
            }
            
            .result-stats {
                padding: 0.6rem;
                font-size: 0.8rem;
            }
            
            .completion-title {
                font-size: 1.3rem;
                margin-bottom: 0.8rem;
            }
            
            .exercise-area {
                height: 32rem;
            }
            
            .exercise-header {
                font-size: clamp(1rem, 2.5vw, 1.25rem);
                line-height: 1.3;
            }
            
            .toolbar {
                padding: 0.5rem;
            }
            
            .dropdown-btn .dropdown-title, .dropdown-btn .dropdown-arrow {
                padding: 0.4rem 0.6rem;
                font-size: 0.8rem;
            }
            
            .exercise-info {
                max-width: 95%;
                padding: 0.5rem;
            }
            
            .timer-bar .info-text {
                font-size: 0.8rem;
                line-height: 1.3;
            }
            
            .fullscreen .timer-bar {
                top: 1.5625rem;
            }
            
            /* √áok k√º√ß√ºk ekranlar i√ßin buton boyutlarƒ± */
            .attention-test-button, .sound-control, .fullscreen-button {
                padding: 0.3rem 0.6rem;
                font-size: 0.7rem;
            }
        }
        
        .fullscreen .container {
            padding-top: 3.125rem;
        }
        
        /* Print styles */
        @media print {
            .navbar, .toolbar, .stop-button, .fullscreen-button, .fullscreen-exit, .overlay, .back-button {
                display: none !important;
            }
            
            .exercise-area, .completion-message {
                break-inside: avoid;
                page-break-inside: avoid;
                box-shadow: none;
                border: 1px solid #ddd;
                background: white !important;
                backdrop-filter: none;
            }
        }
    </style>
</head>
<body>
    <div class="navbar">
        <div class="container">
            <a href="index.html" class="logo">
                <img src="logo.png" alt="ForBrain Learning Center Logo">
            </a>
            <a href="index.html" class="back-button">‚Üê T√ºm Egzersizler</a>
        </div>
    </div>
    
    <div class="container">
        <header>
            <h1>B√ºy√ºy√ºp K√º√ß√ºlen Kare Egzersizi</h1>
        </header>
        
        <div class="exercise-info">
            Bu egzersiz, g√∂zle g√∂rsel takibi geli≈ütirmek, odaklanmayƒ± g√º√ßlendirmek ve hareketli nesneleri izleme becerisini artƒ±rmak amacƒ±yla tasarlanmƒ±≈ütƒ±r. Ekran ortasƒ±nda b√ºy√ºy√ºp k√º√ß√ºlen kareyi ba≈üƒ±nƒ±zƒ± hareket ettirmeden, sadece g√∂zlerinizle takip edin. Bu, g√∂z kaslarƒ±nƒ±zƒ± g√º√ßlendirir ve g√∂rsel odaklanma yeteneƒüinizi geli≈ütirir.
            <br><br>
            <strong>Dikkat: Ba≈üƒ±nƒ±zƒ± hareket ettirmeden, sadece g√∂zlerinizle takip edin!</strong>
        </div>
        
        <div class="toolbar">
            <div class="dropdown">
                <button class="dropdown-btn" id="durationBtn">
                    <div class="dropdown-title" id="selectedDuration">1:00</div>
                    <div class="dropdown-arrow">‚ñæ</div>
                </button>
                <div id="durationDropdown" class="dropdown-content">
                    <a href="#" id="duration30">0:30</a>
                    <a href="#" id="duration60">1:00</a>
                    <a href="#" id="duration120">2:00</a>
                    <a href="#" id="duration180">3:00</a>
                </div>
            </div>
            
            <div class="dropdown">
                <button class="dropdown-btn" id="speedBtn">
                    <div class="dropdown-title" id="selectedSpeed">Normal</div>
                    <div class="dropdown-arrow">‚ñæ</div>
                </button>
                <div id="speedDropdown" class="dropdown-content">
                    <a href="#" id="speed1">Yava≈ü</a>
                    <a href="#" id="speed2">Normal</a>
                    <a href="#" id="speed3">Hƒ±zlƒ±</a>
                </div>
            </div>
            
            <div class="dropdown">
                <button class="dropdown-btn" id="colorBtn">
                    <div class="dropdown-title" id="selectedColor">Mavi</div>
                    <div class="dropdown-arrow">‚ñæ</div>
                </button>
                <div id="colorDropdown" class="dropdown-content">
                    <a href="#" id="colorBlue">Mavi</a>
                    <a href="#" id="colorDual">Deƒüi≈üken (B√ºy√ºrken/K√º√ß√ºl√ºrken)</a>
                </div>
            </div>
        </div>
        
        <div class="timer-bar">
            <span class="info-text">Ekran ortasƒ±ndaki kareyi g√∂zlerinizle takip edin</span>
            <span class="timer" id="timer">01:00</span>
        </div>
        
        <div class="exercise-area" id="exerciseArea">
            <button class="fullscreen-exit" id="fullscreenExit">‚úï</button>
            <button class="stop-button" id="stopButton">Egzersizi Durdur</button>
            
            <div class="info-bar">
                <div class="cycle-counter" id="cycleCounter">D√∂ng√º: 0/0</div>
                <!-- focus-guide div'i buradan kaldƒ±rƒ±ldƒ± ve center-controls i√ßine ta≈üƒ±ndƒ± -->
            </div>
            
            <div class="square-container" id="squareContainer">
                <div class="focus-point" id="focusPoint"></div>
                <div class="square" id="square"></div>
            </div>
            
            <div class="control-buttons-container">
                <div class="left-controls">
                    <!-- √ñnce metronom butonu, sonra dikkat testi butonu -->
                    <button class="sound-control" id="soundControl">üîä Metronom: Kapalƒ±</button>
                    <button class="attention-test-button" id="attentionTestBtn">Dikkat Testi: Kapalƒ±</button>
                </div>
                <div class="center-controls">
                    <!-- focus-guide buraya ta≈üƒ±ndƒ± - alt ortada -->
                    <div class="focus-guide" id="focusGuide">Ba≈üƒ±nƒ±zƒ± hareket ettirmeden, sadece g√∂zlerinizle takip edin</div>
                </div>
                <div class="right-controls">
                    <button class="fullscreen-button" id="fullscreenButton">Tam Ekran</button>
                </div>
            </div>
            
            <div class="overlay" id="startOverlay">
                <button class="start-button" id="startButton">Egzersizi Ba≈ülat</button>
            </div>
            
            <div class="countdown" id="countdown">3</div>
            
            <div id="completionOverlay" class="overlay" style="display: none;">
                <div class="completion-message">
                    <h2 class="completion-title">Egzersiz Tamamlandƒ±!</h2>
                    <div class="result-stats">
                        <p>Toplam D√∂ng√º Sayƒ±sƒ±: <span id="totalCycles">0</span></p>
                        <p>Egzersiz S√ºresi: <span id="exerciseDuration">0 dakika 0 saniye</span></p>
                        <p>Dikkat Testi Performansƒ±: <span id="attentionScore">-</span></p>
                        <p>Ba≈üarƒ± Oranƒ±:</p>
                        <div class="progress-bar">
                            <div class="progress-value" id="successRate">100%</div>
                        </div>
                    </div>
                    <button class="restart-button" id="restartButton">Yeni Egzersiz Ba≈ülat</button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Egzersiz ayarlarƒ±
        let duration = 60;
        let speed = 2;
        let colorMode = 'blue';
        let attentionTestActive = false;
        let soundActive = false;
        let exerciseStarted = false;
        let isFullscreen = false;

        // Kare ayarlarƒ±
        let minSize = 50;
        let maxSize = 300;
        let currentSize = minSize;
        let isGrowing = true;
        let cycleCount = 0;
        let targetCycles = 15;

        // Dikkat testi deƒüi≈ükenleri
        let attentionTestCount = 0;
        let attentionCorrectCount = 0;
        let attentionTestInProgress = false;
        let lastAttentionTest = 0;

        // Zamanlayƒ±cƒ±lar
        let exerciseTimer;
        let squareTimer;
        let metronomeTimer;
        let remainingTime = 60;

        // Hƒ±za g√∂re b√ºy√ºme/k√º√ß√ºlme adƒ±mƒ± (px) ve interval (ms)
        const speedSettings = {
            1: { step: 5, interval: 150 },  // Yava≈ü
            2: { step: 10, interval: 100 }, // Normal
            3: { step: 15, interval: 50 }   // Hƒ±zlƒ±
        };

        // DOM elementleri hazƒ±r olduƒüunda √ßalƒ±≈üacak
        document.addEventListener('DOMContentLoaded', function() {
            setupMetronomeSound();
            setupEventListeners();
        });

        // Metronom sesi olu≈ütur
        function setupMetronomeSound() {
            // AudioContext'i tanƒ±mla ve kullanƒ±cƒ± etkile≈üimi gerektirdiƒüi i√ßin ≈üimdilik ba≈ülatma
            window.audioContext = null;
            
            // Metronom √ßalma fonksiyonu
            window.playMetronomeSound = function() {
                if (!soundActive || !exerciseStarted) return;
                
                // ƒ∞lk ses √ßalma giri≈üiminde AudioContext olu≈ütur (tarayƒ±cƒ± politikasƒ± gereƒüi)
                if (!window.audioContext) {
                    window.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                }
                
                // Ses √ºretimi i√ßin gerekli bile≈üenleri olu≈ütur
                let oscillator = window.audioContext.createOscillator();
                let gainNode = window.audioContext.createGain();
                
                // Ses ayarlarƒ± - tiz ve kƒ±sa bir "tƒ±k" sesi
                oscillator.type = 'sine';
                oscillator.frequency.value = 800; // Hz
                gainNode.gain.value = 0.2; // Ses seviyesi
                
                // Bile≈üenleri baƒüla
                oscillator.connect(gainNode);
                gainNode.connect(window.audioContext.destination);
                
                // Sesi ba≈ülat ve hemen azalt
                oscillator.start();
                
                // Ses uzunluƒüunu ayarla - kƒ±sa bir tƒ±k sesi i√ßin
                gainNode.gain.exponentialRampToValueAtTime(0.001, window.audioContext.currentTime + 0.08);
                
                // Temizlik i√ßin sesi durdur
                setTimeout(function() {
                    oscillator.stop();
                }, 100);
            }
        }

        // T√ºm olay dinleyicilerini kur
        function setupEventListeners() {
            // Dropdown a√ßma i≈ülemleri
            document.getElementById('durationBtn').addEventListener('click', function() {
                toggleDropdown('durationDropdown');
            });
            
            document.getElementById('speedBtn').addEventListener('click', function() {
                toggleDropdown('speedDropdown');
            });
            
            document.getElementById('colorBtn').addEventListener('click', function() {
                toggleDropdown('colorDropdown');
            });
            
            // S√ºre se√ßenekleri
            document.getElementById('duration30').addEventListener('click', function(e) {
                e.preventDefault();
                setDuration(30);
            });
            
            document.getElementById('duration60').addEventListener('click', function(e) {
                e.preventDefault();
                setDuration(60);
            });
            
            document.getElementById('duration120').addEventListener('click', function(e) {
                e.preventDefault();
                setDuration(120);
            });
            
            document.getElementById('duration180').addEventListener('click', function(e) {
                e.preventDefault();
                setDuration(180);
            });
            
            // Hƒ±z se√ßenekleri
            document.getElementById('speed1').addEventListener('click', function(e) {
                e.preventDefault();
                setSpeed(1);
            });
            
            document.getElementById('speed2').addEventListener('click', function(e) {
                e.preventDefault();
                setSpeed(2);
            });
            
            document.getElementById('speed3').addEventListener('click', function(e) {
                e.preventDefault();
                setSpeed(3);
            });
            
            // Renk se√ßenekleri
            document.getElementById('colorBlue').addEventListener('click', function(e) {
                e.preventDefault();
                setColorMode('blue');
            });
            
            document.getElementById('colorDual').addEventListener('click', function(e) {
                e.preventDefault();
                setColorMode('dual');
            });
            
            // Dikkat Testi butonu
            document.getElementById('attentionTestBtn').addEventListener('click', function() {
                attentionTestActive = !attentionTestActive;
                this.textContent = attentionTestActive ? 'Dikkat Testi: A√ßƒ±k' : 'Dikkat Testi: Kapalƒ±';
            });
            
            // Ses kontrol butonu
            document.getElementById('soundControl').addEventListener('click', function() {
                soundActive = !soundActive;
                this.textContent = soundActive ? 'üîä Metronom: A√ßƒ±k' : 'üîä Metronom: Kapalƒ±';
                
                if (exerciseStarted && soundActive) {
                    startMetronome();
                } else if (!soundActive) {
                    stopMetronome();
                }
            });
            
            // Tam ekran butonlarƒ±
            document.getElementById('fullscreenButton').addEventListener('click', toggleFullscreen);
            document.getElementById('fullscreenExit').addEventListener('click', exitFullscreen);
            
            // Ana butonlar
            document.getElementById('startButton').addEventListener('click', startExercise);
            document.getElementById('stopButton').addEventListener('click', stopExercise);
            document.getElementById('restartButton').addEventListener('click', resetExercise);
            
            // Dikkat testi i√ßin bo≈üluk tu≈üu
            document.addEventListener('keydown', function(e) {
                if (e.code === 'Space' && exerciseStarted && attentionTestActive && attentionTestInProgress) {
                    handleAttentionResponse();
                    e.preventDefault(); // Sayfanƒ±n a≈üaƒüƒ± kaymasƒ±nƒ± √∂nle
                }
                
                // ESC tu≈üu ile tam ekrandan √ßƒ±kma
                if (e.key === 'Escape' && isFullscreen) {
                    exitFullscreen();
                }
            });
            
            // Dƒ±≈üarƒ±ya tƒ±klandƒ±ƒüƒ±nda dropdown men√ºleri kapat
            document.addEventListener('click', function(event) {
                if (!event.target.closest('.dropdown-btn') && !event.target.closest('.dropdown-content')) {
                    closeAllDropdowns();
                }
            });
        }

        // Dropdown'u a√ß/kapat
        function toggleDropdown(id) {
            if (exerciseStarted) return;
            
            const dropdown = document.getElementById(id);
            const isOpen = dropdown.style.display === 'block';
            
            // √ñnce t√ºm dropdown'larƒ± kapat
            closeAllDropdowns();
            
            // Tƒ±klanan dropdown a√ßƒ±k deƒüilse a√ß
            if (!isOpen) {
                dropdown.style.display = 'block';
            }
        }

        // T√ºm dropdown'larƒ± kapat
        function closeAllDropdowns() {
            const dropdowns = document.getElementsByClassName('dropdown-content');
            for (let i = 0; i < dropdowns.length; i++) {
                dropdowns[i].style.display = 'none';
            }
        }

        // S√ºreyi ayarla
        function setDuration(seconds) {
            duration = seconds;
            remainingTime = seconds;
            
            // Hedef d√∂ng√º sayƒ±sƒ±nƒ± s√ºreye g√∂re ayarla
            targetCycles = Math.round(duration / 4);
            
            let durationText = '';
            if (seconds < 60) {
                durationText = `0:${seconds < 10 ? '0' : ''}${seconds}`;
            } else {
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                durationText = `${mins}:${secs < 10 ? '0' : ''}${secs}`;
            }
            
            document.getElementById('selectedDuration').innerText = durationText;
            document.getElementById('timer').innerText = durationText;
            document.getElementById('cycleCounter').innerText = `D√∂ng√º: 0/${targetCycles}`;
            closeAllDropdowns();
        }

        // Hƒ±zƒ± ayarla
        function setSpeed(newSpeed) {
            speed = newSpeed;
            const speedTexts = ['Yava≈ü', 'Normal', 'Hƒ±zlƒ±'];
            document.getElementById('selectedSpeed').innerText = speedTexts[newSpeed - 1];
            closeAllDropdowns();
        }

        // Renk modunu ayarla
        function setColorMode(mode) {
            colorMode = mode;
            document.getElementById('selectedColor').innerText = mode === 'blue' ? 'Mavi' : 'Deƒüi≈üken (B√ºy√ºrken/K√º√ß√ºl√ºrken)';
            closeAllDropdowns();
            
            // Eƒüer egzersiz ba≈üladƒ±ysa kare rengini g√ºncelle
            if (exerciseStarted) {
                updateSquareColor();
            }
        }

        // Kare rengini g√ºncelle
        function updateSquareColor() {
            const square = document.getElementById('square');
            
            if (colorMode === 'blue') {
                square.style.backgroundColor = 'var(--primary-color)';
            } else if (colorMode === 'dual') {
                // B√ºy√ºrken mavi, k√º√ß√ºl√ºrken turuncu
                square.style.backgroundColor = isGrowing ? 'var(--primary-color)' : '#ff7f50';
            }
        }

        // Tam ekran modunu a√ß/kapat
        function toggleFullscreen() {
            const exerciseArea = document.getElementById('exerciseArea');
            
            if (!isFullscreen) {
                isFullscreen = true;
                exerciseArea.classList.add('fullscreen');
                document.getElementById('fullscreenExit').style.display = 'block';
                document.getElementById('fullscreenButton').style.display = 'none';
                
                // Timer bar'ƒ± klonla
                const originalTimerBar = document.querySelector('.timer-bar');
                const clonedTimerBar = originalTimerBar.cloneNode(true);
                clonedTimerBar.id = 'fullscreenTimerBar';
                
                // Ortak stil √∂zellikleri
                clonedTimerBar.style.position = 'absolute';
                clonedTimerBar.style.padding = '0.2rem 0.5rem';
                clonedTimerBar.style.fontSize = '0.8rem';
                clonedTimerBar.style.lineHeight = '1.5';
                clonedTimerBar.style.left = '50%';
                clonedTimerBar.style.transform = 'translateX(-50%)';
                clonedTimerBar.style.margin = '0 auto';
                clonedTimerBar.style.display = 'flex';
                clonedTimerBar.style.justifyContent = 'center';
                clonedTimerBar.style.alignItems = 'center';
                clonedTimerBar.style.zIndex = '9999';
                
                // Mobil cihazlar i√ßin √∂zel stiller
                if (window.innerWidth <= 768) {
                    clonedTimerBar.style.top = '3.75rem'; // Durdur butonunun altƒ±nda
                    clonedTimerBar.style.width = '90%';
                    clonedTimerBar.style.maxWidth = '95%';
                    clonedTimerBar.style.height = '2.5rem'; // Daha y√ºksek (mobilde i√ßerik sƒ±ƒüsƒ±n diye)
                    
                    // √áok k√º√ß√ºk mobil ekranlar i√ßin (576px ve altƒ±)
                    if (window.innerWidth <= 576) {
                        clonedTimerBar.style.top = '4.5rem'; // Daha da a≈üaƒüƒ±da
                        clonedTimerBar.style.fontSize = '0.7rem'; // Daha k√º√ß√ºk yazƒ±
                        
                        // ƒ∞√ßeriƒüi daha kompakt hale getir
                        const infoText = clonedTimerBar.querySelector('.info-text');
                        if (infoText) {
                            infoText.style.padding = '0 0.5rem'; // Daha az dolgu
                        }
                    }
                } else {
                    // Masa√ºst√º i√ßin stiller
                    clonedTimerBar.style.top = '0.9375rem';
                    clonedTimerBar.style.width = '80%';
                    clonedTimerBar.style.maxWidth = '800px';
                    clonedTimerBar.style.height = '2rem';
                }
                
                // ƒ∞√ßindeki metin √∂ƒüesini d√ºzenle
                const infoText = clonedTimerBar.querySelector('.info-text');
                if (infoText) {
                    infoText.style.flex = '1';
                    infoText.style.textAlign = 'center';
                    infoText.style.padding = '0 1rem';
                    // Uzun metni kƒ±rpma (mobil i√ßin √∂nemli)
                    infoText.style.whiteSpace = 'normal';
                    infoText.style.overflowWrap = 'break-word';
                }
                
                // Zamanlayƒ±cƒ± √∂ƒüesini d√ºzenle
                const timer = clonedTimerBar.querySelector('#timer');
                if (timer) {
                    timer.id = 'fullscreenTimer';
                    timer.style.textAlign = 'center';
                    timer.style.padding = '0 1rem';
                    timer.style.flexShrink = '0'; // Daraltma yapmasƒ±n
                }
                
                // Timer deƒüerini g√ºncelleme fonksiyonu
                function updateFullscreenTimer() {
                    if (document.getElementById('fullscreenTimer') && document.getElementById('timer')) {
                        document.getElementById('fullscreenTimer').textContent = document.getElementById('timer').textContent;
                    }
                }
                
                // Timer deƒüerini d√ºzenli olarak g√ºncelle
                const timerUpdateInterval = setInterval(updateFullscreenTimer, 500);
                exerciseArea._timerUpdateInterval = timerUpdateInterval;
                
                // Klonlanmƒ±≈ü timer bar'ƒ± egzersiz alanƒ±na ekle
                exerciseArea.appendChild(clonedTimerBar);
                
                // Orijinal timer bar'ƒ± gizle
                originalTimerBar.style.visibility = 'hidden';
            }
        }

        // Tam ekrandan √ßƒ±k
        function exitFullscreen() {
            const exerciseArea = document.getElementById('exerciseArea');
            
            if (isFullscreen) {
                isFullscreen = false;
                exerciseArea.classList.remove('fullscreen');
                document.getElementById('fullscreenExit').style.display = 'none';
                document.getElementById('fullscreenButton').style.display = 'block';
                
                // Klonlanmƒ±≈ü timer bar'ƒ± kaldƒ±r
                const clonedTimerBar = document.getElementById('fullscreenTimerBar');
                if (clonedTimerBar) {
                    exerciseArea.removeChild(clonedTimerBar);
                }
                
                // Timer g√ºncelleme interval'ini temizle
                if (exerciseArea._timerUpdateInterval) {
                    clearInterval(exerciseArea._timerUpdateInterval);
                }
                
                // Orijinal timer bar'ƒ± tekrar g√∂ster
                const originalTimerBar = document.querySelector('.timer-bar');
                originalTimerBar.style.visibility = 'visible';
            }
        }

        // Zamanƒ± formatla
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins < 10 ? '0' : ''}${mins}:${secs < 10 ? '0' : ''}${secs}`;
        }

        // Metronom sesini √ßal
        function playMetronome() {
            if (soundActive && exerciseStarted) {
                window.playMetronomeSound();
            }
        }

        // Metronom sesini ba≈ülat
        function startMetronome() {
            stopMetronome(); // √ñnceki metronom'u durdur
            
            // Hƒ±za g√∂re metronom aralƒ±ƒüƒ±nƒ± belirle
            const interval = speedSettings[speed].interval * 5; // B√ºy√ºme/k√º√ß√ºlme aralƒ±ƒüƒ±ndan daha uzun
            
            metronomeTimer = setInterval(playMetronome, interval);
            playMetronome(); // ƒ∞lk sesi hemen √ßal
        }

        // Metronom sesini durdur
        function stopMetronome() {
            clearInterval(metronomeTimer);
        }

        // Karenin boyutunu g√ºncelle
        function updateSquareSize() {
            if (!exerciseStarted) return;
            
            const square = document.getElementById('square');
            const container = document.getElementById('squareContainer');
            
            // Hƒ±za g√∂re b√ºy√ºme/k√º√ß√ºlme ayarlarƒ±
            const { step, interval } = speedSettings[speed];
            
            // B√ºy√ºme veya k√º√ß√ºlme i≈ülemi
            if (isGrowing) {
                currentSize += step;
                
                // Maksimum boyuta ula≈üƒ±ldƒ±ysa
                if (currentSize >= maxSize) {
                    currentSize = maxSize;
                    isGrowing = false;
                    
                    // Renk modunu g√ºncelle
                    updateSquareColor();
                }
            } else {
                currentSize -= step;
                
                // Minimum boyuta ula≈üƒ±ldƒ±ysa
                if (currentSize <= minSize) {
                    currentSize = minSize;
                    isGrowing = true;
                    
                    // Bir d√∂ng√º tamamlandƒ±
                    cycleCount++;
                    document.getElementById('cycleCounter').innerText = `D√∂ng√º: ${cycleCount}/${targetCycles}`;
                    
                    // Renk modunu g√ºncelle
                    updateSquareColor();
                }
            }
            
            // Karenin boyutunu g√ºncelle
            square.style.width = `${currentSize}px`;
            square.style.height = `${currentSize}px`;
            
            // Sonraki g√ºncellemeyi planla
            squareTimer = setTimeout(updateSquareSize, interval);
        }

        // Dikkat testi ba≈ülat
        function startAttentionTest() {
            if (!attentionTestActive || !exerciseStarted || attentionTestInProgress) return;
            
            // En az 3 saniye ge√ßmi≈ü olmalƒ± son testten bu yana
            const now = Date.now();
            if (now - lastAttentionTest < 3000) return;
            
            // Dikkat testi i√ßin kare rengini kƒ±rmƒ±zƒ± yap
            attentionTestInProgress = true;
            const square = document.getElementById('square');
            const originalColor = square.style.backgroundColor;
            square.style.backgroundColor = 'var(--danger-color)';
            
            // Uyarƒ± mesajƒ± g√∂ster
            const squareContainer = document.getElementById('squareContainer');
            
            // Uyarƒ± elementini olu≈ütur veya var olanƒ± al
            let attentionAlert = document.getElementById('attentionAlert');
            if (!attentionAlert) {
                attentionAlert = document.createElement('div');
                attentionAlert.id = 'attentionAlert';
                attentionAlert.className = 'attention-alert';
                attentionAlert.textContent = 'BO≈ûLUK TU≈ûUNA BAS!';
                squareContainer.appendChild(attentionAlert);
            }
            
            // Uyarƒ±yƒ± g√∂ster
            attentionAlert.style.display = 'block';
            
            // Test sayacƒ±nƒ± artƒ±r
            attentionTestCount++;
            
            // 0.5 saniye sonra normale d√∂n
            setTimeout(function() {
                if (exerciseStarted) {
                    square.style.backgroundColor = originalColor;
                    attentionAlert.style.display = 'none';
                    attentionTestInProgress = false;
                    
                    // Eƒüer kullanƒ±cƒ± tepki vermediyse
                    if (attentionTestInProgress) {
                        attentionTestInProgress = false;
                    }
                }
            }, 500);
            
            // Son test zamanƒ±nƒ± g√ºncelle
            lastAttentionTest = now;
        }

        // Dikkat testine yanƒ±t
        function handleAttentionResponse() {
            if (attentionTestInProgress) {
                attentionCorrectCount++;
                attentionTestInProgress = false;
                
                // Uyarƒ±yƒ± gizle
                const attentionAlert = document.getElementById('attentionAlert');
                if (attentionAlert) {
                    attentionAlert.style.display = 'none';
                }
            }
        }

        // Rastgele aralƒ±klarla dikkat testi ba≈ülat
        function scheduleRandomAttentionTest() {
            if (!attentionTestActive || !exerciseStarted) return;
            
            // Rastgele 3-10 saniye arasƒ±nda
            const randomDelay = Math.floor(Math.random() * 7000) + 3000;
            
            setTimeout(function() {
                startAttentionTest();
                
                // Egzersiz hala devam ediyorsa bir sonraki testi planla
                if (exerciseStarted) {
                    scheduleRandomAttentionTest();
                }
            }, randomDelay);
        }

        // Egzersizi ba≈ülat
        function startExercise() {
            // Egzersiz zaten ba≈üladƒ±ysa i≈ülem yapma
            if (exerciseStarted) return;
            
            // Deƒüi≈ükenleri sƒ±fƒ±rla
            exerciseStarted = true;
            currentSize = minSize;
            isGrowing = true;
            cycleCount = 0;
            remainingTime = duration;
            attentionTestCount = 0;
            attentionCorrectCount = 0;
            
            // UI elemanlarƒ±nƒ± g√ºncelle
            document.getElementById('stopButton').style.display = 'block';
            document.getElementById('startOverlay').style.display = 'none';
            document.getElementById('timer').innerText = formatTime(remainingTime);
            document.getElementById('cycleCounter').innerText = `D√∂ng√º: 0/${targetCycles}`;
            
            // Kare rengini ayarla
            updateSquareColor();
            
            // Tam ekran modunu etkinle≈ütir
            if (!isFullscreen) {
                toggleFullscreen();
            }
            
            // Geri sayƒ±mƒ± g√∂ster
            const countdownEl = document.getElementById('countdown');
            countdownEl.style.display = 'block';
            countdownEl.innerText = '3';
            
            // Manuel olarak geri sayƒ±m yap, fonksiyon √ßaƒürƒ±larƒ± ile
            startCountdown();
        }

        // Geri sayƒ±mƒ± ba≈ülat
        function startCountdown() {
            const countdownEl = document.getElementById('countdown');
            let count = 3;
            
            function updateCountdown() {
                countdownEl.innerText = count;
                
                if (count > 0) {
                    count--;
                    setTimeout(updateCountdown, 1000);
                } else {
                    countdownEl.style.display = 'none';
                    
                    // Egzersizi ba≈ülat
                    startTimer();
                    updateSquareSize();
                    
                    // Dikkat testi a√ßƒ±ksa, rastgele testleri ba≈ülat
                    if (attentionTestActive) {
                        scheduleRandomAttentionTest();
                    }
                    
                    // Metronom a√ßƒ±ksa sesi ba≈ülat
                    if (soundActive) {
                        startMetronome();
                    }
                }
            }
            
            // ƒ∞lk g√ºncellemeyi ba≈ülat
            updateCountdown();
        }

        // Zamanlayƒ±cƒ±yƒ± ba≈ülat
        function startTimer() {
            exerciseTimer = setInterval(function() {
                remainingTime--;
                document.getElementById('timer').innerText = formatTime(remainingTime);
                
                // Rastgele dikkat testi 
                if (attentionTestActive && Math.random() < 0.05 && !attentionTestInProgress) {
                    startAttentionTest();
                }
                
                if (remainingTime <= 0) {
                    endExercise();
                }
            }, 1000);
        }

        // Egzersizi durdur
        function stopExercise() {
            if (!exerciseStarted) return;
            endExercise();
        }

        // Egzersizi sonlandƒ±r
        function endExercise() {
            // Egzersiz durumunu g√ºncelle
            exerciseStarted = false;
            
            // T√ºm zamanlayƒ±cƒ±larƒ± temizle
            clearInterval(exerciseTimer);
            clearTimeout(squareTimer);
            stopMetronome();
            
            // UI elemanlarƒ±nƒ± g√ºncelle
            document.getElementById('stopButton').style.display = 'none';
            
            // Sonu√ßlarƒ± hazƒ±rla
            const mins = Math.floor(duration / 60);
            const secs = duration % 60;
            const formattedDuration = `${mins} dakika ${secs} saniye`;
            
            document.getElementById('totalCycles').innerText = cycleCount;
            document.getElementById('exerciseDuration').innerText = formattedDuration;
            
            // Dikkat testi sonu√ßlarƒ±
            if (attentionTestActive && attentionTestCount > 0) {
                const attentionRate = Math.round((attentionCorrectCount / attentionTestCount) * 100);
                document.getElementById('attentionScore').innerText = `${attentionRate}% (${attentionCorrectCount}/${attentionTestCount})`;
            } else {
                document.getElementById('attentionScore').innerText = '-';
            }
            
            // Ba≈üarƒ± oranƒ±nƒ±, yapƒ±lan d√∂ng√ºlerin hedef sayƒ±ya oranƒ± olarak belirle
            let successRate = 100;
            if (targetCycles > 0) {
                successRate = Math.min(100, Math.round((cycleCount / targetCycles) * 100));
            }
            
            document.getElementById('successRate').innerText = `${successRate}%`;
            document.getElementById('successRate').style.width = `${successRate}%`;
            
            // Sonu√ß ekranƒ±nƒ± g√∂ster
            document.getElementById('completionOverlay').style.display = 'flex';
        }

        // Egzersizi sƒ±fƒ±rla
        function resetExercise() {
            // Sonu√ß ekranƒ±nƒ± gizle
            document.getElementById('completionOverlay').style.display = 'none';
            
            // Ba≈ülangƒ±√ß ekranƒ±nƒ± g√∂ster
            document.getElementById('startOverlay').style.display = 'flex';
            
            // Zamanƒ± sƒ±fƒ±rla
            document.getElementById('timer').innerText = formatTime(duration);
            
            // Deƒüi≈ükenleri sƒ±fƒ±rla
            remainingTime = duration;
            cycleCount = 0;
            document.getElementById('cycleCounter').innerText = `D√∂ng√º: 0/${targetCycles}`;
            
            // Kareyi ba≈ülangƒ±√ß boyutuna getir
            const square = document.getElementById('square');
            square.style.width = `${minSize}px`;
            square.style.height = `${minSize}px`;
            
            // Tam ekrandan √ßƒ±k
            exitFullscreen();
        }

    </script>
</body>
</html>