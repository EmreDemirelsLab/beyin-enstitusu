<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
    <title>Hedef Nesne Egzersizi | ForBrain Learning Center</title>
    <style>
        :root {
            --primary-color: #0f4c8a; /* Dark blue from the logo */
            --primary-color-transparent: rgba(15, 76, 138, 0.85); /* Semi-transparent primary */
            --secondary-color: #65c8e5; /* Light blue from the logo */
            --secondary-color-transparent: rgba(101, 200, 229, 0.85); /* Semi-transparent secondary */
            --accent-color: #8cc63f; /* Green from the logo */
            --accent-color-transparent: rgba(140, 198, 63, 0.85); /* Semi-transparent accent */
            --success-color: #06d6a0;
            --danger-color: #ef476f;
            --warning-color: #ffd166;
            --light-color: #f9fbff;
            --dark-color: #333333;
            --grey-color: #f0f2f5;
            --white-transparent: rgba(255, 255, 255, 0.9);
            --shadow: 0 0.25rem 0.5rem rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
            
            /* Responsive units */
            --container-padding: 5%;
            --card-padding: clamp(0.5rem, 1.8vw, 1rem);
            --section-margin: clamp(0.8rem, 2.5vw, 1.5rem);
            --heading-size: clamp(1.1rem, 3vw, 1.6rem);
            --subheading-size: clamp(0.9rem, 1.8vw, 1.1rem);
            --text-size: clamp(0.85rem, 1.6vw, 0.95rem);
            --text-small: clamp(0.75rem, 1.3vw, 0.85rem);
            --icon-size: clamp(2.2rem, 5vw, 3rem);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        
        html {
            font-size: 16px; /* Base font size */
        }
        
        body {
            background-color: var(--light-color);
            color: var(--dark-color);
            line-height: 1.6;
            overflow-x: hidden;
            overscroll-behavior: none;
            transition: var(--transition);
        }
        
        img {
            max-width: 100%;
            height: auto;
        }
        
        .container {
            width: 100%;
            max-width: 70rem; /* 1120px - slightly smaller */
            margin: 0 auto;
            padding: 0 var(--container-padding);
        }
        
        /* Navbar Styles */
        .navbar {
            background-color: rgba(255, 255, 255, 0.95);
            padding: clamp(0.6rem, 1.5vw, 0.9rem) 0;
            box-shadow: var(--shadow);
            position: relative;
            z-index: 10;
            backdrop-filter: blur(4px);
        }
        
        .navbar .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            text-decoration: none;
            color: var(--primary-color);
        }
        
        .logo img {
            width: 60%;
            max-width: 15.625rem; /* 250px */
            min-width: 9.375rem; /* 150px */
            height: auto;
        }
        
        .back-button {
            color: var(--primary-color);
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 0.3125rem;
            background: var(--grey-color);
            transition: background 0.3s;
            font-size: var(--text-small);
            font-weight: 500;
        }
        
        .back-button:hover {
            background: #e5e9f0;
        }
        
        /* Header Styles */
        header {
            background-color: transparent;
            color: var(--primary-color);
            padding: clamp(0.5rem, 1.2vw, 0.8rem) 0;
            text-align: center;
            margin: var(--section-margin) 0 clamp(0.3rem, 1vw, 0.6rem);
        }
        
        header h1 {
            margin: 0;
            font-weight: 500;
            font-size: var(--heading-size);
            letter-spacing: 0.5px;
        }
        
        /* Blue Divider - Removed for minimalist design */
        .decorative-bar {
            display: none;
        }
        
        /* Exercise Info */
        .exercise-info {
            background-color: var(--white-transparent);
            border-radius: 0.4rem;
            padding: var(--card-padding);
            margin: 0.5rem auto var(--section-margin);
            text-align: center;
            color: #444;
            font-size: var(--text-small);
            line-height: 1.5;
            box-shadow: var(--shadow);
            max-width: 85%; /* Smaller width */
            border-left: 3px solid var(--primary-color);
            backdrop-filter: blur(4px);
            transition: transform 0.3s ease, opacity 0.3s ease;
        }
        
        .exercise-info:hover {
            transform: translateY(-2px);
            opacity: 0.95;
        }
        
        /* Toolbar */
        .toolbar {
            background-color: white;
            padding: var(--card-padding);
            display: flex;
            flex-wrap: wrap;
            gap: 0.625rem;
            border-radius: 0.5rem;
            box-shadow: var(--shadow);
            margin-bottom: clamp(0.4rem, 1.5vw, 0.8rem);
            align-items: center;
            position: relative;
            z-index: 5;
        }
        
        .dropdown {
            position: relative;
            display: inline-block;
        }
        
        .dropdown-btn {
            background: var(--light-color);
            border: 1px solid var(--grey-color);
            border-radius: 0.375rem;
            padding: 0;
            display: flex;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 0.0625rem 0.1875rem rgba(0,0,0,0.05);
        }
        
        .dropdown-btn:hover, .dropdown-btn:active {
            background: var(--grey-color);
        }
        
        .dropdown-title {
            border-right: 1px solid var(--grey-color);
            padding: 0.5rem 0.625rem;
            font-weight: 500;
            font-size: 0.875rem;
        }
        
        .dropdown-arrow {
            padding: 0.5rem;
            color: var(--primary-color);
        }
        
        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #fff;
            min-width: 10rem;
            box-shadow: 0 0.3125rem 0.9375rem rgba(0,0,0,0.1);
            z-index: 6;
            border-radius: 0.375rem;
            margin-top: 0.3125rem;
            overflow: hidden;
        }
        
        .dropdown-content a {
            color: var(--dark-color);
            padding: 0.625rem 0.9375rem;
            text-decoration: none;
            display: block;
            transition: background 0.2s ease;
        }
        
        .dropdown-content a:hover, .dropdown-content a:active {
            background-color: var(--grey-color);
            color: var(--primary-color);
        }
        
        /* Info Bar */
        .info-bar {
            background: rgba(15, 76, 138, 0.8);
            color: white;
            height: 2rem;
            line-height: 2rem;
            display: flex;
            justify-content: space-between;
            border-radius: 0.4rem;
            margin-bottom: 0.05rem;
            box-shadow: var(--shadow);
            position: relative;
            z-index: 2;
            backdrop-filter: blur(4px);
            transition: background 0.3s ease;
        }
        
        .info-bar:hover {
            background: rgba(15, 76, 138, 0.9);
        }
        
        .info-text {
            padding: 0 0.8rem;
            font-weight: 500;
            font-size: var(--text-small);
            letter-spacing: 0.3px;
        }
        
        .timer {
            background-color: rgba(0, 0, 0, 0.15);
            color: white;
            padding: 0 1.1rem;
            border-radius: 0 0.4rem 0.4rem 0;
            font-weight: bold;
            font-size: 0.9rem;
            transition: background-color 0.3s ease;
        }
        
        /* Target Info */
        .target-info {
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 0.4rem;
            padding: calc(var(--card-padding) * 0.75);
            margin: clamp(0.3rem, 1.2vw, 0.6rem) auto;
            text-align: center;
            font-size: var(--text-small);
            max-width: 12rem;
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            z-index: 3;
            backdrop-filter: blur(4px);
            border-left: 2px solid var(--accent-color);
        }
        
        .target-info:hover {
            background-color: rgba(255, 255, 255, 0.9);
            transform: translateY(-2px);
        }
        
        .target-info:active {
            transform: scale(0.98) translateY(0);
        }
        
        .target-symbol {
            font-size: 3.5rem;         
            margin: 1rem;              
            line-height: 1;            
            opacity: 0.95;             
            display: inline-block;
            transition: transform 0.3s ease;
            color: #000000; 
            filter: grayscale(100%) brightness(0);
            -webkit-filter: grayscale(100%) brightness(0);
        }
        
        .target-info:hover .target-symbol {
            transform: scale(1.05);
        }
        
        /* Exercise Area */
        .exercise-area {
            position: relative;
            width: 100%;
            max-width: 100%;
            height: 38rem; /* Made even larger to emphasize the exercise */
            margin: 0.5rem auto;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 0.4rem;
            overflow: visible;
            box-shadow: var(--shadow);
            margin-top: 0.625rem;
            position: relative;
            z-index: 1;
            transition: box-shadow 0.3s ease, background-color 0.3s ease;
            border: 1px solid rgba(240, 242, 245, 0.8);
        }
        
        .exercise-area:hover {
            box-shadow: 0 0.3rem 0.8rem rgba(0, 0, 0, 0.1);
        }
        
        .objects-container {
            position: absolute;
            top: 45%;
            left: 0;
            right: 0;
            min-height: 6rem;
            max-height: 8rem;
            margin-top: -3rem;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            padding: 0 1rem;
            transition: transform 0.2s ease;
        }
        
        .object {
            font-size: 3.5rem;
            margin: 1rem;
            line-height: 1;
            transition: transform 0.2s ease, opacity 0.2s ease;
            opacity: 0.95;
            color: #000000;
            filter: grayscale(100%) brightness(0);
            -webkit-filter: grayscale(100%) brightness(0);
        }
        
        .object:hover {
            transform: scale(1.05);
            opacity: 1;
        }
        
        /* Answer Buttons */
        .answer-buttons {
            position: absolute;
            bottom: 1.2rem;
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
            gap: 1.5rem;
        }
        
        .answer-btn {
            padding: 0.7rem 2.2rem;
            font-size: 1.05rem;
            cursor: pointer;
            border: none;
            border-radius: 2.5rem;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 0.2rem 0.4rem rgba(0,0,0,0.08);
            user-select: none;
            -webkit-user-select: none;
            letter-spacing: 0.5px;
        }
        
        .answer-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 0.3rem 0.6rem rgba(0,0,0,0.12);
        }
        
        .answer-btn.clicked {
            transform: scale(0.9);
            opacity: 0.6;
            transition: transform 0.15s ease, opacity 0.15s ease;
          }

        .answer-btn:active {
            transform: translateY(1px);
            box-shadow: 0 0.1rem 0.2rem rgba(0,0,0,0.08);
        }
        
        .yes-btn {
            background-color: rgba(140, 198, 63, 0.9);
            color: white;
        }
        
        .yes-btn:hover {
            background-color: var(--accent-color);
        }
        
        .no-btn {
            background-color: rgba(239, 71, 111, 0.9);
            color: white;
        }
        
        .no-btn:hover {
            background-color: var(--danger-color);
        }
        
        /* Feedback */
        .feedback {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 1rem 2.2rem;
            border-radius: 2.5rem;
            font-size: 1.3rem;
            opacity: 0;
            transition: all 0.4s ease;
            pointer-events: none;
            backdrop-filter: blur(3px);
            letter-spacing: 0.5px;
            font-weight: 500;
        }
        
        /* Countdown styling - FIXED */
        .countdown {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 5rem;
            height: 5rem;
            display: none; /* Start with display none - will be changed to flex by JS */
            background: white;
            color: var(--primary-color);
            border: 3px solid var(--primary-color);
            z-index: 20;
            border-radius: 50%;
            box-shadow: 0 0.3rem 1.25rem rgba(0,0,0,0.2);
            font-weight: bold;
            pointer-events: none;
            
            /* These properties will apply when the element is displayed */
            font-size: clamp(2.5rem, 5vw, 3.5rem);
            text-align: center; /* Additional centering for text */
            line-height: 5rem; /* Match height for vertical alignment */
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translate(-50%, -50%) scale(0.9); }
            to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }
        
        /* Overlay */
        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(15, 76, 138, 0.6);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10;
            border-radius: 0.4rem;
            backdrop-filter: blur(5px);
            transition: background 0.4s ease;
        }
        
        .overlay:hover {
            background: rgba(15, 76, 138, 0.7);
        }
        
        .start-button, .stop-button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.9375rem 2.5rem;
            font-size: 1.125rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            border-radius: 3.125rem;
            box-shadow: 0 0.25rem 0.9375rem rgba(0,0,0,0.2);
            margin: 0.3125rem;
            user-select: none;
            -webkit-user-select: none;
        }
        
        .start-button:active, .stop-button:active {
            transform: translateY(0.1875rem);
            box-shadow: 0 0.125rem 0.625rem rgba(0,0,0,0.2);
        }
        
        .stop-button {
            background: var(--danger-color);
            position: absolute;
            top: 0.9375rem;
            left: 0.9375rem;
            padding: 0.625rem 1.25rem;
            font-size: 1rem;
            z-index: 5;
            display: none;
        }
        
        /* Completion Message */
        .completion-message {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 0.4rem;
            padding: 1.1rem 1.6rem;
            text-align: center;
            max-width: 28rem;
            width: 90%;
            height: auto;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 0.4rem 1.2rem rgba(0,0,0,0.08);
            backdrop-filter: blur(5px);
            transform: translateY(10px);
            animation: slideUp 0.4s forwards;
            border-top: 3px solid var(--accent-color);
        }
        
        @keyframes slideUp {
            to { transform: translateY(0); }
        }
        
        .completion-title {
            color: var(--primary-color);
            font-size: 1.6rem;
            margin-top: 0.5rem;
            margin-bottom: 1rem;
            font-weight: 500;
            letter-spacing: 0.5px;
        }
        
        .result-stats {
            background-color: rgba(249, 251, 255, 0.7);
            border-radius: 0.4rem;
            padding: 0.8rem;
            margin: 0.5rem 0;
            text-align: left;
            font-size: 0.9rem;
            transition: background-color 0.3s ease;
        }
        
        .result-stats:hover {
            background-color: var(--light-color);
        }
        
        .result-stats p {
            margin: 0.4rem 0;
            display: flex;
            justify-content: space-between;
            transition: transform 0.2s ease;
        }
        
        .result-stats p:hover {
            transform: translateX(2px);
        }
        
        .result-stats p span {
            font-weight: 500;
            color: var(--primary-color);
        }
        
        .progress-bar {
            height: 1.2rem;
            background-color: rgba(240, 242, 245, 0.7);
            border-radius: 0.6rem;
            margin: 0.8rem 0;
            overflow: hidden;
            position: relative;
        }
        
        .progress-value {
            height: 100%;
            background: linear-gradient(to right, var(--primary-color-transparent), var(--primary-color));
            border-radius: 0.6rem;
            text-align: center;
            line-height: 1.2rem;
            color: white;
            font-weight: 500;
            transition: width 1.2s cubic-bezier(0.22, 1, 0.36, 1);
            font-size: 0.85rem;
            letter-spacing: 0.5px;
        }
        
        .restart-button {
            background: var(--accent-color-transparent);
            color: white;
            border: none;
            padding: 0.7rem 2rem;
            font-size: 0.95rem;
            font-weight: 500;
            cursor: pointer;
            margin-top: 1rem;
            transition: all 0.3s ease;
            border-radius: 2.5rem;
            box-shadow: 0 0.2rem 0.5rem rgba(0,0,0,0.1);
            user-select: none;
            -webkit-user-select: none;
            letter-spacing: 0.5px;
        }
        
        .restart-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 0.3rem 0.7rem rgba(0,0,0,0.15);
            background: var(--accent-color);
        }
        
        .restart-button:active {
            transform: translateY(1px);
            box-shadow: 0 0.1rem 0.3rem rgba(0,0,0,0.1);
        }
        
        /* Stats Container */
        .stats-container {
            position: absolute;
            top: 0.8rem;
            right: 0.8rem;
            background-color: rgba(255, 255, 255, 0.75);
            padding: 0.4rem 0.6rem;
            border-radius: 0.4rem;
            font-size: 0.7rem;
            box-shadow: 0 0.1rem 0.4rem rgba(0,0,0,0.08);
            transition: background-color 0.3s ease, transform 0.3s ease;
            backdrop-filter: blur(4px);
            border-right: 2px solid var(--primary-color-transparent);
        }
        
        .stats-container:hover {
            background-color: rgba(255, 255, 255, 0.9);
            transform: translateX(-3px);
        }
        
        .stats-container div {
            margin: 0.25rem 0;
            transition: transform 0.2s ease;
        }
        
        .stats-container div:hover {
            transform: translateX(2px);
        }
        
        .stats-container span {
            font-weight: 500;
            color: var(--primary-color);
        }
        
        /* Responsive Styles */
        @media (max-width: 48em) { /* 768px */
            .exercise-area {
                height: 34rem; /* Adjusted for better mobile display */
            }
            
            .objects-container {
                flex-wrap: wrap;
                height: auto;
                top: 40%;
                padding: 0 0.6rem;
            }
        
            .stats-container {
                top: 0.6rem;
                right: 0.6rem;
                padding: 0.3rem 0.5rem;
                font-size: 0.6rem;
                max-width: 7rem;
                border-radius: 0.3rem;
            }
            
            .stats-container div {
                margin: 0.1rem 0;
            }
        
            .object {
                font-size: 2.8rem;
                margin: 0.6rem;
            }
        
            .answer-buttons {
                bottom: 1.1rem;
            }
        
            .exercise-area {
                padding-bottom: 0.5rem;
            }
            
            .answer-btn {
                padding: 0.8rem 2rem;
                font-size: 1rem;
                min-width: 7rem;
            }
            
            /* Larger touch areas for mobile */
            .start-button, .stop-button, .restart-button {
                padding: 0.8rem 2rem;
                min-width: 11rem;
                font-size: 1rem;
            }
            
            .target-info {
                padding: 0.7rem;
                margin: 0.7rem auto;
                max-width: 10rem;
            }
            
            .dropdown-content a {
                padding: 0.8rem;
                font-size: 0.9rem;
            }
            
            .dropdown-btn .dropdown-title,
            .dropdown-btn .dropdown-arrow {
                padding: 0.6rem 0.8rem;
                font-size: 0.9rem;
            }
            
            .completion-message {
                padding: 0.8rem 1.2rem;
            }
        }
        
        @media (max-width: 36em) { /* 576px */
            .completion-message {
                padding: 0.8rem;
                width: 85%;
            }
            
            .result-stats {
                padding: 0.6rem;
                font-size: 0.8rem;
            }
            
            .completion-title {
                font-size: 1.3rem;
                margin-bottom: 0.8rem;
            }
            
            .exercise-area {
                height: 32rem; /* Adjusted for mobile */
            }
            
            .object {
                font-size: 2.4rem;
                margin: 0.5rem;
            }
            
            .answer-btn {
                padding: 0.7rem 1.5rem;
                font-size: 0.95rem;
                min-width: 6rem;
            }
            
            .target-symbol {
                font-size: 2.3rem;
            }
            
            .exercise-info {
                max-width: 95%;
            }
        }
        
        /* Print styles */
        @media print {
            .navbar, .toolbar, .decorative-bar, .stop-button, 
            .answer-buttons, .overlay, .back-button {
                display: none !important;
            }
            
            .exercise-area, .completion-message {
                break-inside: avoid;
                page-break-inside: avoid;
                box-shadow: none;
                border: 1px solid #ddd;
                background: white !important;
                backdrop-filter: none;
            }
        }
    </style>
</head>
<body>
    <div class="navbar">
        <div class="container">
            <a href="index.html" class="logo">
                <img src="logo.png" alt="ForBrain Learning Center Logo">
            </a>
            <a href="index.html" class="back-button">← Tüm Egzersizler</a>
        </div>
    </div>
    
    <div class="container">
        <header>
            <h1>Hedef Nesne Egzersizi</h1>
        </header>
        
        <div class="decorative-bar"></div>
        
        <div class="exercise-info">
            Bu egzersiz, algılama ve görsel takip becerilerinizi geliştirmeyi amaçlar. 
            Size bir hedef nesne gösterilecek ve kısa sürelerle ekranda beliren nesneler arasında 
            bu hedef nesnenin olup olmadığını tespit etmeniz istenecek. 
            Hedefi gördüğünüzde EVET, görmediğinizde HAYIR butonuna basın.
            <br><br>
            <strong>Her 5 adımda bir nesne sayısı artacak ve egzersiz giderek zorlaşacaktır.</strong>
        </div>
        
        <div class="toolbar">
            <div class="dropdown">
                <button class="dropdown-btn" id="durationBtn">
                    <div class="dropdown-title" id="selectedDuration">1:00</div>
                    <div class="dropdown-arrow">▾</div>
                </button>
                <div id="durationDropdown" class="dropdown-content">
                    <a href="#" id="duration60">1:00</a>
                    <a href="#" id="duration120">2:00</a>
                    <a href="#" id="duration180">3:00</a>
                    <a href="#" id="duration240">4:00</a>
                    <a href="#" id="duration300">5:00</a>
                </div>
            </div>
            
            <div class="dropdown">
                <button class="dropdown-btn" id="levelBtn">
                    <div class="dropdown-title" id="selectedLevel">3. Seviye</div>
                    <div class="dropdown-arrow">▾</div>
                </button>
                <div id="levelDropdown" class="dropdown-content">
                    <a href="#" id="level1">1. Seviye (Kolay)</a>
                    <a href="#" id="level2">2. Seviye</a>
                    <a href="#" id="level3">3. Seviye (Orta)</a>
                    <a href="#" id="level4">4. Seviye</a>
                    <a href="#" id="level5">5. Seviye (Zor)</a>
                </div>
            </div>
        </div>
        
        <div class="info-bar">
            <span class="info-text">Hedef nesneyi bulun!</span>
            <span class="timer" id="timer">01:00</span>
        </div>
        
        <div class="target-info" id="targetInfo">
            <div>Bu şekli gördüğünüzde EVET'e basın:</div>
            <div class="target-symbol" id="targetSymbol" style="visibility: hidden;">★</div>
        </div>
        
        <div class="exercise-area">
            <button class="stop-button" id="stopButton">Egzersizi Durdur</button>
            
            <div class="objects-container" id="objectsContainer">
                <!-- Nesneler JavaScript ile eklenecek -->
            </div>
            
            <div class="answer-buttons" id="answerButtons" style="display: none;">
                <button class="answer-btn yes-btn" id="yesButton">EVET</button>
                <button class="answer-btn no-btn" id="noButton">HAYIR</button>
            </div>
            
            <div class="feedback" id="feedback"></div>
            
            <div class="stats-container" id="statsContainer" style="display: none;">
                <div>Doğru: <span id="correctCount">0</span></div>
                <div>Yanlış: <span id="wrongCount">0</span></div>
                <div>Kaçırılan: <span id="missedCount">0</span></div>
                <div>Seviye: <span id="currentLevelDisplay">1</span></div>
                <div>Nesne Sayısı: <span id="currentObjectCountDisplay">4</span></div>
            </div>
            
            <div class="overlay" id="startOverlay">
                <button class="start-button" id="startButton">Egzersizi Başlat</button>
            </div>
            
            <div class="countdown" id="countdown">3</div>
            
            <div id="completionOverlay" class="overlay" style="display: none;">
                <div class="completion-message">
                    <h2 class="completion-title">Egzersiz Tamamlandı!</h2>
                    <div class="result-stats">
                        <p>Toplam Adım: <span id="totalSteps">0</span></p>
                        <p>Doğru: <span id="finalCorrect">0</span></p>
                        <p>Yanlış: <span id="finalWrong">0</span></p>
                        <p>Kaçırılan: <span id="finalMissed">0</span></p>
                        <p>Ulaşılan Seviye: <span id="finalLevel">1</span></p>
                        <p>Maksimum Nesne Sayısı: <span id="maxObjects">4</span></p>
                        <p>Başarı Yüzdesi:</p>
                        <div class="progress-bar">
                            <div class="progress-value" id="successRate">0%</div>
                        </div>
                    </div>
                    <button class="restart-button" id="restartButton">Yeni Egzersiz Başlat</button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Kullanılabilecek semboller
        const semboller = [
            '★', '✦', '✚', '✖', '◆', '▲', '●', '■', '♦', '♣', '♠', '♥',
            '➤', '✈', '☼', '☂', '☯', '⚛', '⚡', '⚽', '♫', '✎', '✉', '☎'
        ];

        // Egzersiz ayarları
        let duration = 60;  // saniye
        let level = 3;
        let exerciseStarted = false;
        let targetSymbol = '★';
        let stepCount = 0;
        let correctCount = 0;
        let wrongCount = 0;
        let missedCount = 0;
        let currentStepHasTarget = false;
        let answerClicked = false;

        
        // Progressif nesne sayısı için değişkenler
        let currentLevel = 1;
        let baseObjectCount = 4; // başlangıç nesne sayısı
        let maxLevel = 10; // maksimum seviye
        let objectIncreasePerLevel = 2; // her seviyede kaç nesne eklenecek
        
        // Zamanlayıcılar
        let exerciseTimer;
        let countdownTimer;
        let objectsTimer;
        let remainingTime = 60;
        let hideTimer, answerTimer;
        
        // Zorluk seviyesine göre görüntülenme süreleri (ms)
        const displayDurations = [4000, 3200, 2800, 2400, 2000];
        
        // Mobil cihaz tespiti
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        
        // Array karıştırma fonksiyonu
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }
        
        // Sayfa yüklendiğinde çalışacak
        document.addEventListener('DOMContentLoaded', function() {
            // Event listener'ları ekle
            setupEventListeners();
            
            // Hedef nesneyi görünür yapmak için mesaj ekle
            addTargetInfoText();
            
            // Mobil cihaz optimizasyonları
            if (isMobile) {
                setupMobileOptimizations();
            }
            
            // Dokunma olayı sorununu düzelt
            preventTouchProblems();
        });
        
        // Tüm olay dinleyicileri ekle
        function setupEventListeners() {
            // Dropdown menüler
            document.getElementById('durationBtn').addEventListener('click', function() {
                toggleDropdown('durationDropdown');
            });
            
            document.getElementById('levelBtn').addEventListener('click', function() {
                toggleDropdown('levelDropdown');
            });
            
            // Süre seçenekleri
            document.getElementById('duration60').addEventListener('click', function(e) {
                e.preventDefault();
                setDuration(60);
            });
            
            document.getElementById('duration120').addEventListener('click', function(e) {
                e.preventDefault();
                setDuration(120);
            });
            
            document.getElementById('duration180').addEventListener('click', function(e) {
                e.preventDefault();
                setDuration(180);
            });
            
            document.getElementById('duration240').addEventListener('click', function(e) {
                e.preventDefault();
                setDuration(240);
            });
            
            document.getElementById('duration300').addEventListener('click', function(e) {
                e.preventDefault();
                setDuration(300);
            });
            
            // Seviye seçenekleri
            document.getElementById('level1').addEventListener('click', function(e) {
                e.preventDefault();
                setLevel(1);
            });
            
            document.getElementById('level2').addEventListener('click', function(e) {
                e.preventDefault();
                setLevel(2);
            });
            
            document.getElementById('level3').addEventListener('click', function(e) {
                e.preventDefault();
                setLevel(3);
            });
            
            document.getElementById('level4').addEventListener('click', function(e) {
                e.preventDefault();
                setLevel(4);
            });
            
            document.getElementById('level5').addEventListener('click', function(e) {
                e.preventDefault();
                setLevel(5);
            });
            
            // Butonlar
            document.getElementById('startButton').addEventListener('click', startExercise);
            document.getElementById('stopButton').addEventListener('click', stopExercise);
            document.getElementById('yesButton').addEventListener('click', answerYes);
            document.getElementById('noButton').addEventListener('click', answerNo);
            document.getElementById('restartButton').addEventListener('click', resetExercise);
            
            // Hedef bilgisi kutusuna tıklama
            document.getElementById('targetInfo').addEventListener('click', function() {
                showTargetSymbol();
            });
            
            // Dışarıya tıklandığında dropdown menüleri kapat
            document.addEventListener('click', function(event) {
                // Dropdown düğmeleri dışında bir yere tıklandıysa
                if (!event.target.closest('.dropdown-btn') && !event.target.closest('.dropdown-content')) {
                    // Tüm dropdown menüleri kapat
                    const dropdowns = document.getElementsByClassName('dropdown-content');
                    for (let i = 0; i < dropdowns.length; i++) {
                        dropdowns[i].style.display = 'none';
                    }
                }
            });
        }
        
        // Mobil cihazlar için ek optimizasyonlar
        function setupMobileOptimizations() {
            console.log("Mobil cihaz tespit edildi, dokunma olayları ekleniyor");
            
            // Dokunma olayları ekle
            document.getElementById('startButton').addEventListener('touchstart', function(e) {
                e.preventDefault();
                startExercise();
            });
            
            document.getElementById('stopButton').addEventListener('touchstart', function(e) {
                e.preventDefault();
                stopExercise();
            });
            
            document.getElementById('yesButton').addEventListener('touchstart', function(e) {
                e.preventDefault();
                answerYes();
            });
            
            document.getElementById('noButton').addEventListener('touchstart', function(e) {
                e.preventDefault();
                answerNo();
            });
            
            document.getElementById('restartButton').addEventListener('touchstart', function(e) {
                e.preventDefault();
                resetExercise();
            });
            
            document.getElementById('targetInfo').addEventListener('touchstart', function(e) {
                e.preventDefault();
                showTargetSymbol();
            });
        }
        
        // Dokunma sorunlarını önle
        function preventTouchProblems() {
            // Mobil sürükleme ve kaydırma sorunlarını önle
            document.addEventListener('touchmove', function(e) {
                if (e.target.closest('.answer-btn') || e.target.closest('.target-info') || 
                    e.target.closest('.start-button') || e.target.closest('.stop-button') || 
                    e.target.closest('.restart-button')) {
                    e.preventDefault();
                }
            }, { passive: false });
            
            // Çift dokunma yakınlaştırmasını engelle
            document.addEventListener('touchend', function(e) {
                const now = Date.now();
                const lastTouch = window.lastTouchEnd || now;
                const delta = now - lastTouch;
                if (delta < 300 && e.touches.length === 0) {
                    e.preventDefault();
                }
                window.lastTouchEnd = now;
            }, false);
        }
        
        // Hedef bilgisi metnini ekle
        function addTargetInfoText() {
            const targetContainer = document.getElementById("targetInfo");
            if (!document.querySelector(".target-info-text")) {
                const infoText = document.createElement("div");
                infoText.className = "target-info-text";
                infoText.innerHTML = "Hedefi görmek için tıklayın";
                infoText.style.fontSize = "12px";
                infoText.style.color = "#777";
                infoText.style.marginTop = "5px";
                targetContainer.appendChild(infoText);
            }
        }
        
        // Dropdown menüyü aç/kapat
        function toggleDropdown(id) {
            if (exerciseStarted) return;
            
            const dropdown = document.getElementById(id);
            dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
            
            // Diğer açık dropdown'ları kapat
            const dropdowns = document.getElementsByClassName('dropdown-content');
            for (let i = 0; i < dropdowns.length; i++) {
                if (dropdowns[i].id !== id) {
                    dropdowns[i].style.display = 'none';
                }
            }
        }
        
        // Hedef sembolü göster (tıklama ile)
        function showTargetSymbol() {
            const targetSymbolElement = document.getElementById("targetSymbol");
            targetSymbolElement.style.visibility = "visible";
            
            // 4 saniye sonra tekrar gizle
            setTimeout(() => {
                targetSymbolElement.style.visibility = "hidden";
            }, 4000);
        }
        
        // Egzersiz süresini ayarla
        function setDuration(seconds) {
            duration = seconds;
            remainingTime = seconds;
            document.getElementById("selectedDuration").innerText = formatTime(seconds);
            document.getElementById("timer").innerText = formatTime(seconds);
            document.getElementById("durationDropdown").style.display = "none";
        }
        
        // Zorluk seviyesini ayarla
        function setLevel(newLevel) {
            level = newLevel;
            document.getElementById("selectedLevel").innerText = `${newLevel}. Seviye`;
            document.getElementById("levelDropdown").style.display = "none";
        }
        
        // Zamanı MM:SS formatında göster
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins < 10 ? '0' : ''}${mins}:${secs < 10 ? '0' : ''}${secs}`;
        }
        
        // Hedef sembolü belirle
        function setTargetSymbol() {
            // Rastgele bir sembol seç
            const randomIndex = Math.floor(Math.random() * semboller.length);
            targetSymbol = semboller[randomIndex];
            
            // Hedef sembolü göster
            document.getElementById("targetSymbol").innerText = targetSymbol;
        }
        
        // Hedef sembolünü göster ve sonra gizle
        function showTargetSymbolTemporarily() {
            // Hedef sembolünü içeren container'ı bul
            const targetContainer = document.getElementById("targetInfo");
            // Hedef sembolü bul
            const targetSymbolElement = document.getElementById("targetSymbol");
            
            // Başlangıçta hedef sembolü göster
            targetContainer.style.display = "block";
            targetSymbolElement.style.visibility = "visible";
            
            // 5 saniye sonra sadece sembolü gizle, container'ı değil
            setTimeout(() => {
                targetSymbolElement.style.visibility = "hidden";
            }, 5000);
        }
        
        // Nesneleri oluştur ve göster
        function createAndShowObjects() {
            // 1) Önceki timer'ları temizle
            clearTimeout(hideTimer);
            clearTimeout(answerTimer);
          
            // 2) Cevap tıklama bayrağını sıfırla ve butonları tekrar aktif et
            answerClicked = false;
            document.getElementById('yesButton').disabled = false;
            document.getElementById('noButton').disabled = false;
            
          
            // 3) Container'ı temizle
            const container = document.getElementById('objectsContainer');
            container.innerHTML = '';

            document.getElementById('yesButton').classList.remove('clicked');
            document.getElementById('noButton').classList.remove('clicked');
          
            // 4) Mevcut seviyeye göre nesne sayısını hesapla ve ekrana yaz
            const currentObjectCount = baseObjectCount + (currentLevel - 1) * objectIncreasePerLevel;
            document.getElementById('currentLevelDisplay').innerText = currentLevel;
            document.getElementById('currentObjectCountDisplay').innerText = currentObjectCount;
          
            // 5) Bu adımda hedef var mı?
            currentStepHasTarget = Math.random() < 0.5;
          
            // 6) Gösterilecek sembolleri hazırla
            const objectsToShow = [];
            if (currentStepHasTarget) objectsToShow.push(targetSymbol);
            const otherSymbols = semboller.filter(s => s !== targetSymbol);
            const remaining = currentObjectCount - (currentStepHasTarget ? 1 : 0);
            for (let i = 0; i < remaining; i++) {
              const idx = Math.floor(Math.random() * otherSymbols.length);
              objectsToShow.push(otherSymbols[idx]);
            }
          
            // 7) Karıştır ve DOM'a ekle
            shuffleArray(objectsToShow).forEach(sym => {
              const el = document.createElement('div');
              el.className = 'object';
              el.innerText = sym;
              container.appendChild(el);
            });
          
            // 8) Butonları göster
            document.getElementById('answerButtons').style.display = 'flex';
          
            // 9) delay'i currentLevel'a göre al (maximum index taşmasını önleyerek)
            const delay = displayDurations[
              Math.min(currentLevel - 1, displayDurations.length - 1)
            ];
            console.log(`🌟 currentLevel=${currentLevel}, delay=${delay}ms`);
          
            // 10) delay sonra tümünü gizle
            hideTimer = setTimeout(() => {
              if (!exerciseStarted) return;
              console.log(`🕒 hideObjects tetiklendi (${delay}ms)`);
              hideObjects();
            }, delay);
          
            // 11) delay+2000 sonra “kaçırma” ve nextStep
            answerTimer = setTimeout(() => {
              if (!exerciseStarted) return;
              console.log(`⏰ missed & nextStep (${delay + 2000}ms)`);
              hideObjects();
              missedCount++;
              document.getElementById('missedCount').innerText = missedCount;
              nextStep();
            }, delay + 2000);
          }
        
        // Nesneleri gizle
        function hideObjects() {
            const objects = document.getElementsByClassName('object');
            for (let obj of objects) {
              obj.style.display = 'none';
            }
            //document.getElementById('answerButtons').style.display = 'none';
          }
        
        // "EVET" cevabı
        function answerYes() {
            // geri sayımda ya da egzersiz başlamamışsa çık
            if (answerClicked || !exerciseStarted || document.getElementById('countdown').style.display === 'block') 
              return;
          
            answerClicked = true;
          
            // buton referanslarını al
            const yesBtn = document.getElementById('yesButton');
            const noBtn  = document.getElementById('noButton');
          
            // efekt ve disable
            yesBtn.classList.add('clicked');
            yesBtn.disabled = true;
            noBtn.disabled  = true;
          
            clearTimeout(answerTimer);
          
            if (currentStepHasTarget) {
              correctCount++;
              document.getElementById('correctCount').innerText = correctCount;
              checkLevelUp();
            } else {
              wrongCount++;
              document.getElementById('wrongCount').innerText = wrongCount;
            }
          
            nextStep();
          }
        
        // "HAYIR" cevabı
        function answerNo() {
            if (answerClicked || !exerciseStarted || document.getElementById('countdown').style.display === 'block') 
              return;
          
            answerClicked = true;
          
            const yesBtn = document.getElementById('yesButton');
            const noBtn  = document.getElementById('noButton');
          
            noBtn.classList.add('clicked');
            yesBtn.disabled = true;
            noBtn.disabled  = true;
          
            clearTimeout(answerTimer);
          
            if (!currentStepHasTarget) {
              correctCount++;
              document.getElementById('correctCount').innerText = correctCount;
              checkLevelUp();
            } else {
              wrongCount++;
              document.getElementById('wrongCount').innerText = wrongCount;
            }
          
            nextStep();
          }

        function checkLevelUp() {
            if (correctCount > 0 && correctCount % 8 === 0) {
                setTargetSymbol();
                showFeedback('Yeni hedef!', '#4361ee');
        
                const targetSymbolElement = document.getElementById("targetSymbol");
                document.getElementById("targetInfo").style.display = "block";
                targetSymbolElement.style.visibility = "visible";
        
                setTimeout(() => {
                    targetSymbolElement.style.visibility = "hidden";
                }, 2000);
        
                if (currentLevel < maxLevel) {
                    currentLevel++;
                    const currentObjectCount = baseObjectCount + (currentLevel - 1) * objectIncreasePerLevel;
                    showFeedback(`Seviye ${currentLevel}! Nesne sayısı: ${currentObjectCount}`, '#06d6a0');
        
                    document.getElementById('currentLevelDisplay').innerText = currentLevel;
                    document.getElementById('currentObjectCountDisplay').innerText = currentObjectCount;
                }
            }
        }
        
        // Geri bildirim göster
        function showFeedback(message, color) {
            const feedback = document.getElementById('feedback');
            feedback.innerText = message;
            feedback.style.backgroundColor = color;
            feedback.style.opacity = 1;
            
            setTimeout(() => {
                feedback.style.opacity = 0;
            }, 1000);
        }
        
        // Sonraki adıma geç
        function nextStep() {
            stepCount++;
            hideObjects();
        
            // Kısa bir bekleme süresi sonra yeni nesneleri göster
            setTimeout(() => {
                if (exerciseStarted) {
                    createAndShowObjects();
                }
            }, 1200);
        }
        
        // Egzersizi başlat
        function startExercise() {
            // Değişkenleri sıfırla
            exerciseStarted = true;
            stepCount = 0;
            correctCount = 0;
            wrongCount = 0;
            missedCount = 0;
            remainingTime = duration;
            currentLevel = 1; // Seviyeyi sıfırla
            
            // İstatistikleri sıfırla ve göster
            document.getElementById('correctCount').innerText = '0';
            document.getElementById('wrongCount').innerText = '0';
            document.getElementById('missedCount').innerText = '0';
            document.getElementById('currentLevelDisplay').innerText = '1';
            document.getElementById('currentObjectCountDisplay').innerText = baseObjectCount.toString();
            
            // Durdurma butonunu göster
            document.getElementById('stopButton').style.display = 'block';
            
            // Başlat overlay'i gizle
            document.getElementById('startOverlay').style.display = 'none';
            
            // Hedef sembolü belirle ve geçici olarak göster
            setTargetSymbol();
            showTargetSymbolTemporarily();
            
            // Başlangıçta tüm nesneleri gizle
            hideObjects();
            
            // Geri sayım sırasında cevap butonlarını gizle
            document.getElementById('answerButtons').style.display = 'none';
            
            // Geri sayım başlat
            const countdownEl = document.getElementById('countdown');
            countdownEl.style.display = 'block';
            let countdownValue = 3;
            countdownEl.innerText = countdownValue;
            
            countdownTimer = setInterval(() => {
                countdownValue--;
                countdownEl.innerText = countdownValue;
                
                if (countdownValue <= 0) {
                    clearInterval(countdownTimer);
                    countdownEl.style.display = 'none';
                    
                    // Nesneleri göstermeye başla
                    createAndShowObjects();
                    
                    // Zamanlayıcıyı başlat
                    startTimer();
                }
            }, 1000);
        }
        
        // Egzersizi durdur
        function stopExercise() {
            // Egzersiz başlamadıysa işlem yapma
            if (!exerciseStarted) return;
            
            // Egzersizi sonlandır
            endExercise();
            
            // Geri bildirim göster
            showFeedback('Egzersiz durduruldu', '#4361ee');
        }
        
        // Zamanlayıcıyı başlat
        function startTimer() {
            exerciseTimer = setInterval(() => {
                remainingTime--;
                document.getElementById('timer').innerText = formatTime(remainingTime);
                
                if (remainingTime <= 0) {
                    endExercise();
                }
            }, 1000);
        }
        
        // Egzersizi sonlandır
        function endExercise() {
            // Egzersiz durumunu güncelle
            exerciseStarted = false;
            
            // Zamanlayıcıları temizle
            clearInterval(exerciseTimer);
            clearTimeout(answerTimer);
            clearInterval(countdownTimer);
            
            // Nesneleri ve cevap butonlarını gizle
            hideObjects();
            
            // Countdown'u gizle - FIX HERE
            document.getElementById('countdown').style.display = 'none';
            
            // İstatistik kutusunu gizle
            document.getElementById('statsContainer').style.display = 'none';
            
            // Durdurma butonunu gizle
            document.getElementById('stopButton').style.display = 'none';
            
            // Sonuç istatistiklerini hazırla
            const totalSteps = stepCount;
            const successRate = totalSteps > 0 ? Math.round((correctCount / totalSteps) * 100) : 0;
            const finalLevel = currentLevel;
            const maxObjectCount = baseObjectCount + (finalLevel - 1) * objectIncreasePerLevel;
            
            // Sonuç değerlerini güncelle
            document.getElementById('totalSteps').innerText = totalSteps;
            document.getElementById('finalCorrect').innerText = correctCount;
            document.getElementById('finalWrong').innerText = wrongCount;
            document.getElementById('finalMissed').innerText = missedCount;
            document.getElementById('finalLevel').innerText = finalLevel;
            document.getElementById('maxObjects').innerText = maxObjectCount;
            document.getElementById('successRate').innerText = `${successRate}%`;
            document.getElementById('successRate').style.width = `${successRate}%`;
            
            // Tamamlama overlay'ini göster
            document.getElementById('completionOverlay').style.display = 'flex';
        }
        
        // Egzersizi sıfırla
        function resetExercise() {
            // Tamamlama overlay'ini gizle
            document.getElementById('completionOverlay').style.display = 'none';
            
            // Başlat overlay'ini göster
            document.getElementById('startOverlay').style.display = 'flex';
            
            // Zamanı sıfırla
            document.getElementById('timer').innerText = formatTime(duration);
            
            // Değişkenleri sıfırla
            remainingTime = duration;
            stepCount = 0;
            correctCount = 0;
            wrongCount = 0;
            missedCount = 0;
            currentLevel = 1;
        }
    </script>
</body>
</html>